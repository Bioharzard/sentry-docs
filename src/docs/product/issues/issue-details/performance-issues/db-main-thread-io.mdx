---
title: "Database on Main Thread"
sidebar_order: 20
description: "Learn more about Database on Main Thread and how to diagnose and fix these issues."
---

The main UI thread in a mobile application handles user interface events such as button presses and page scrolls. To prevent App Hangs and Application Not Responding errors, the main UI thread should not be used for performing long-running operations like database queries. These kinds of operations block the whole UI until they finish running and get in the way of the user interacting with the app.

## Detection Criteria

The detector for this performance issue looks at the total non-overlapping duration for database spans on the main thread. If it exceeds 16ms, a Performance Issue is created.

## Span Evidence

Span evidence identifies the root cause of the Database on Main Thread problem by showing you three main aspects:

- Transaction name
- Parent Span - Where the database spans occurred
- Offending Span - The actual spans that are performing database queries in the main thread

![Database Span Evidence](db-io.png)

View it by going to the **Issues** page in Sentry, selecting your Android project, clicking on the database error you want to examine, then scrolling down to the "Span Evidence" section in the "Details" tab.
## Example

Here are two examples of how a database error may appear in your code if you're using Swift or Kotlin and how you might solve them.

This is what you might see when you're making a database query on the main thread if you're using Swift:

```swift
TODO(wmak)
```

In order to fix this performance issue, TODO(wmak)

```swift
TODO(wmak)
```

This is what you might see if you're using Kotlin:

```kotlin
TODO(wmak)
```

In order to fix this performance issue you can TODO(wmak)

```kotlin
TODO(wmak)
```
